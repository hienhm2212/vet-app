<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <!-- Page header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h2 class="mb-1">
            <i class="bi bi-people text-primary me-2"></i>
            Chủ nuôi
          </h2>
          <p class="text-muted mb-0">Quản lý thông tin chủ nuôi và thú cưng</p>
        </div>
        <%= link_to new_owner_path, class: 'btn btn-primary' do %>
          <i class="bi bi-plus-circle me-2"></i>
          Thêm chủ nuôi mới
        <% end %>
      </div>

      <!-- Search form -->
      <%= form_with url: owners_path, method: :get, local: true, class: 'mb-4' do |form| %>
        <div class="row">
          <div class="col-md-6">
            <div class="input-group">
              <%= form.text_field :search, value: params[:search], placeholder: 'Tìm kiếm theo tên, số điện thoại hoặc email...', class: 'form-control' %>
              <%= form.submit 'Tìm kiếm', class: 'btn btn-outline-secondary' %>
            </div>
          </div>
        </div>
      <% end %>

      <% if @owners.any? %>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th>Tên</th>
                <th>Số điện thoại</th>
                <th>Email</th>
                <th>Số bệnh nhân</th>
                <th>Ngày tạo</th>
                <th>Thao tác</th>
              </tr>
            </thead>
            <tbody>
              <% @owners.each do |owner| %>
                <tr>
                  <td><strong><%= owner.name %></strong></td>
                  <td><%= format_phone(owner.phone) %></td>
                  <td><%= owner.email %></td>
                  <td>
                    <span class="badge bg-info"><%= owner.patients.count %></span>
                  </td>
                  <td><%= format_date_vn(owner.created_at) %></td>
                  <td>
                    <div class="btn-group" role="group">
                      <%= link_to 'Xem', owner_path(owner), class: 'btn btn-sm btn-outline-primary' %>
                      <%= link_to 'Sửa', edit_owner_path(owner), class: 'btn btn-sm btn-outline-warning' %>
                      <%= link_to 'Xóa', owner_path(owner), 
                          method: :delete, 
                          data: { confirm: 'Bạn có chắc chắn muốn xóa chủ nuôi này?' },
                          class: 'btn btn-sm btn-outline-danger' %>
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <div class="alert alert-info text-center">
          <h4>Chưa có chủ nuôi nào</h4>
          <p>Hãy thêm chủ nuôi đầu tiên để bắt đầu sử dụng hệ thống.</p>
          <%= link_to 'Thêm chủ nuôi mới', new_owner_path, class: 'btn btn-primary' %>
        </div>
      <% end %>
    </div>
  </div>
</div>
