<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <!-- Page header -->
      <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
          <h2 class="mb-1">
            <i class="bi bi-arrow-left-right text-primary me-2"></i>
            Giao dịch Tồn kho
          </h2>
          <p class="text-muted mb-0">Lịch sử nhập xuất và quản lý tồn kho</p>
        </div>
        <%= link_to root_path, class: 'btn btn-secondary' do %>
          <i class="bi bi-arrow-left me-2"></i>
          Quay lại
        <% end %>
      </div>

      <% if @inventory_transactions.any? %>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th>Ngày</th>
                <th>Sản phẩm</th>
                <th>Loại giao dịch</th>
                <th>Số lượng</th>
                <th>Nguồn gốc</th>
                <th>Tồn kho sau</th>
                <th>Thao tác</th>
              </tr>
            </thead>
            <tbody>
              <% @inventory_transactions.each do |transaction| %>
                <tr>
                  <td><%= format_datetime_vn(transaction.created_at) %></td>
                  <td>
                    <strong><%= transaction.product.name %></strong>
                    <br>
                    <small class="text-muted"><%= transaction.product.barcode %></small>
                  </td>
                  <td>
                    <span class="<%= transaction.transaction_type == 'IN' ? 'badge bg-success' : 'badge bg-danger' %>">
                      <%= transaction.display_type %>
                    </span>
                  </td>
                  <td>
                    <strong><%= transaction.quantity %></strong>
                  </td>
                  <td><%= transaction.source %></td>
                  <td>
                    <span class="<%= stock_status_class(transaction.product) %>">
                      <%= transaction.product.stock %>
                    </span>
                  </td>
                  <td>
                    <%= link_to 'Xem chi tiết', inventory_transaction_path(transaction), class: 'btn btn-sm btn-outline-primary' %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      <% else %>
        <div class="alert alert-info text-center">
          <h4>Chưa có giao dịch tồn kho nào</h4>
          <p>Giao dịch tồn kho sẽ được tạo tự động khi có hoạt động nhập/xuất hàng.</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
